name: Start Azure Web App

on:
  schedule:
    # Set to run at 8:30 AM (UTC) from Monday to Friday
    - cron:  '30 20 * * 1-5'

jobs:
  stop:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Login to Azure
      uses: azure/login@v1
      with:
          client-id: ${{ secrets.AZURE_CLIENT_ID }}
          tenant-id: ${{ secrets.AZURE_TENANT_ID }}
          subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}

    - name: Stop Azure Web App
      run: |
          az webapp stop --name 'mglmanagement' --resource-group 'mgl-consulting-resource-group'
